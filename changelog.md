Fixed bug of incorrect panning when the pointer went outside the canvas / browser inner window.

Event handlers have been reworked. The 'addEventListener' method was used, which works much better than properties.